# Creating Required Environment

## Android Root Check Bypass
- [Root Check Bypass](https://arz101.medium.com/android-pentesting-bypassing-root-detection-37729f571eda)
- `frida -U -f az.package.name --codeshare dzonerzy/fridantiroot`

## My Toolset

<img width="436" alt="image" src="https://user-images.githubusercontent.com/112255413/223034610-3954e36b-fe76-45cd-81d5-4ab39f08a53a.png">

- Magisk
- [Riru](https://github.com/RikkaApps/Riru)
- [LSPosed](https://github.com/LSPosed/LSPosed)
- [Always Trust User Certificates -> A Magisk module that automatically adds user certificates to the system root CA store](https://github.com/NVISOsecurity/MagiskTrustUserCerts)
- [Traffic Analysis via Tcpdump](https://andreafortuna.org/2018/05/28/how-to-install-and-run-tcpdump-on-android-devices/)


LSPosed Modules:

<img width="436" alt="image" src="https://user-images.githubusercontent.com/112255413/223034948-69918671-abb6-4d7b-a1d2-d729b4d1c311.png">

- SSLUnpinning
- TrustMeAlready



## Troubleshooting
- [--no-pause issue in Frida](https://github.com/frida/frida/issues/2277)
- [Failed to spawn: need Gadget to attach on jailed Android](https://stackoverflow.com/questions/71687188/unable-to-connect-to-the-frida-server-need-gadget-to-attach-on-jailed-android)
- [2 - Failed to spawn: need Gadget to attach on jailed Android](https://github.com/frida/frida/issues/2326)
- [My problem was not to have Frida server in Android Emulator. To install it:](https://github.com/frida/frida/releases)
- Also, when you execute Frida server in Android Emulator, be careful to have execute (+x) permission on the file
- [frida.ProcessNotFoundError: unable to find process with name 'system_server'; 1. Be root; 2. Run frida-server](frida.ProcessNotFoundError: unable to find process with name 'system_server')
- [Build Burp Certificate on Android](https://portswigger.net/burp/documentation/desktop/mobile/config-android-device)
- [It should be build as System certificate](https://blog.ropnop.com/configuring-burp-suite-with-android-nougat)
- [Read-write (rw) mount issue on Android](https://stackoverflow.com/questions/6066030/read-only-file-system-on-android)
- [`adb remount` issue on Android](https://android.stackexchange.com/questions/52443/the-command-adb-root-works-but-adb-remount-results-in-operation-not-permit)
- [`adb remount` troubleshooting](https://copyprogramming.com/howto/adb-remount-fails-mount-system-not-in-proc-mounts)
- [Android Emulator --writable-system](https://stackoverflow.com/questions/15417105/forcing-the-android-emulator-to-store-changes-to-system)
- [Android Emulator --no-snapshot-load](https://stackoverflow.com/questions/9810560/how-do-i-restart-an-android-emulator)
- [Kill Android Server](https://stackoverflow.com/questions/20155376/android-stop-emulator-from-command-line)
- [Android Emulator reboot](https://android.stackexchange.com/questions/47989/how-can-i-shutdown-my-android-phone-using-an-adb-command)

## ADB
```
# Being Root
adb root
adb shell

# Building Proxy:
settings put global http_proxy <proxy_address>:<port>
settings put global global_http_proxy_host <proxy_address>
settings put global global_http_proxy_port <port>
settings put global global_proxy_pac_url null


# Deleting Proxy:
settings delete global http_proxy
settings delete global global_http_proxy_host
settings delete global global_http_proxy_port
settings delete global global_proxy_pac_url

```
